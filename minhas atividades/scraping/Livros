from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from time import sleep
import csv

chrome = webdriver.Chrome()
chrome.get('https://books.toscrape.com/')
'''
titulo = chrome.find_element(By.XPATH,'/html/body/div/div/div/div/section/div[2]/ol/li[1]/article/h3/a')
#print(titulo.get_attribute('title')) Aqui ele pega o titulo do link
#print(titulo.get_attribute('href')) Aqui mostra o link no print

titulo.click()
sleep(2)

#titulo_especifico = chrome.find_element (By.XPATH,'/html/body/div/div/div[2]/div[2]/article/div[1]/div[2]/h1')
#print(titulo_especifico.text) Aqui ele pega o titulo em str no site

#volta a pagina do chrome
chrome.back()
sleep(3)
'''
livros = chrome.find_elements(By.XPATH,'//article[@class="product_pod"]')

dados = [['Titulo', 'Pre√ßo', 'Estoque']]

for livro in livros:
    titulo_link = livro.find_element(By.XPATH, './h3/a')
    titulo_link.click()
    
    titulo = chrome.find_element(By.TAG_NAME,'h1')
    preco = chrome.find_element(By.XPATH,'//p[@class="price_color"]')
    estoque = chrome.find_element(By.XPATH,'//p[@class="instock availability"]')
   
    print(titulo.text)
    print(preco.text)
    print(estoque.text.replace('In stock (', '').replace(' available)', ''))
    
    linha = [titulo.text, preco.text, estoque.text.replace('In stock (', '').replace(' available)', '')]
    dados.append(linha)
    
    chrome.back()
    sleep(1)

with open('Livros.csv', mode='w', newline='') as meu_csv:
    writer = csv.writer (meu_csv,delimer=';')
    writer.writerows(dados)

    
    
    
    
    
    
    
    
    
    
    
    
    
'''
    proximo = livro.find_element(By.XPATH, '/html/body/div/div/div/div/section/div[2]/div/ul/li[2]/a')
    proximo.click()
    input()
    sleep(3)
'''